..!interpreter english NOABBREV DECLARATION
.. easy2lg - generiert
.. Copyright (c) 1990-2015  abas Software AG
.. Generated by Udo Hîfling, abas GmbH & Co. KG
.. at 2015-10-12, 14:06
.. file: \\magellan.abasag.intra\gmbhspx\2015r4\owfw1\s0076.sv.spx
..
..  owfw1/S0076.SV
..
.. kopf
.set Trans -
..@@BEGINHEAD
..========================================================================
..==
..==  Name               : S0076.SV
..==
..==  Pfad               : owfw1
..==
..==  Language/Sprache   : ENGLISH
..==  Possible Languages : GERMAN | ENGLISH
..==
..==  Interpreteroptionen: NOABBREV DECLARATION
..==  Possible Options   : [DECLARATION] [ENGLVAR] [TRANSLATE]
..==
..==
..==  Funktion           : Stornierte ArbeitsgÑnge an IVS melden
..==
..==
..==  Erstellungsdatum   :
..==
..==  Autor              : abas GmbH & Co. KG
..==                       Udo Hîfling
..==  Menuepunkte        :
..==
..==  Maskenprioritaet
..==  bei EFOP           :
..==
..==  Besonderheiten     :
..==
..==
..==
..==
..==
..==  Aenderungshistorie :
..==
..========================================================================
..@@ENDHEAD
..
.. standard programs
.input ARB            ? _F|defined(U|xarb)
..
..  .input DEFAULT.INI    ? _F|defined(U|xyservice)
..
.input KKOMNAME.KONST
.input KDATNAME.KONST
.input KAKTNAME.KONST
..  .input OP.STATUS.SET ? F|fileexists("OP.STATUS.SET")
..
.. variable definitions
..@@BEGINVARDEFS
..====================================================
..... procedure stack pointer .....
.type integer    U|xprocsp                  ? _F|defined(U|xprocsp)
.type integer    U|xIdummy                  ? _F|defined(U|xIdummy)
.type text       U|xTdummy                  ? _F|defined(U|xTdummy)
.type real       U|xRdummy                  ? _F|defined(U|xRdummy)
..
.type text       U|xTsys                    ? _F|defined(U|xTsys)
.type text       U|xTmeldung                ? _F|defined(U|xTmeldung)
.type text       U|xTsubeg                  ? _F|defined(U|xTsubeg)
..
.type text       U|xTyaufbez                ? _F|defined(U|xTyaufbez)
..
.type text      xT0                 ? _F|defined(U|xT0)
.type text      xT1                 ? _F|defined(U|xT1)
.type text      xT2                 ? _F|defined(U|xT2)
.type text      xT3                 ? _F|defined(U|xT3)
.type text      xT4                 ? _F|defined(U|xT4)
..
.type text      xTtempfile          ? _F|defined(U|xTtempfile)
.type text      xTblank         ? _F|defined(U|xTblank)
.type text      xTnull          ? _F|defined(U|xTnull)
..
.type text      xTpo1           ? _F|defined(U|xTpo1)
.type text      xTpo2           ? _F|defined(U|xTpo2)
.type text      xTpo3           ? _F|defined(U|xTpo3)
.type text      xTpo4           ? _F|defined(U|xTpo4)
.type text      xTpo5           ? _F|defined(U|xTpo5)
.type text      xTpo6           ? _F|defined(U|xTpo6)
.type text      xTpo7           ? _F|defined(U|xTpo7)
.type text      xTpo8           ? _F|defined(U|xTpo8)
.type text      xTpo9           ? _F|defined(U|xTpo9)
.type text      xTpo10          ? _F|defined(U|xTpo10)
.type text      xTpo11          ? _F|defined(U|xTpo11)
.type text      xTpo12          ? _F|defined(U|xTpo12)
.type text      xTpo13          ? _F|defined(U|xTpo13)
..
..====================================================
..@@ENDVARDEFS
..
.. initialize procedure stack pointer
..FORMEL xprocsp = 0
..
.. ----------------------------------------
.continue EPROCDEF
.. procedure definitions
..
!PROC001: ----- Export -----
.. Storno
.formula  U|xtpo1 = "S"
..
.. Trennzeichen einfÅgen
..
.formula  U|xtpo2 = U|xtblank + G|mandant
.formula  U|xtpo2 = U|xtpo2 >> 20
..
.formula  U|xtpo3 = U|xtnull + 'H|nummer'
.formula  U|xtpo3 = U|xtpo3 >> 9
..
.. die ursprÅngliche Sollmenge holen, damit NICHT
.. die offene Menge an BDE Åbermittelt wird
..
.formula  U|xtpo4 = U|xtnull
..
.formula  U|xtpo4 = U|xtpo4 << "."
.formula  U|xtpo4 = U|xtpo4 >> 7
..
.. ist entfallen
.formula  U|xtpo5 = ""
..
.formula  U|xtpo6 = U|xTnull + 'H|mgr^nummer'
.formula  U|xtpo6 = U|xTpo6 >> 9
..
..
.continue EL001 ? _(H|te > 0)
.. IF001
..  in H|zesek steht die StÅckzeit immer in Sekunden
.formula    U|xRdummy = H|zesek / 60
.formula    U|xtpo7   = U|xtnull + 'U|xRdummy'
..
.continue FI001
!EL001
.formula    U|xtpo7 = U|xtnull + 'H|te'
..
!FI001
..
.formula    U|xtpo7 = U|xtpo7 >> 7
..
.. RÅstzeit tr in Minuten
.formula    U|xtpo8 = U|xTnull + 'H|tr'
.formula    U|xtpo8 = U|xtpo8 >> 7
..
.. Bezugsgrî·e StÅck fÅr te
.formula    U|xtpo9 = U|xTnull + 'H|anzahl'
.formula    U|xtpo9 = U|xtpo9 >> 8
..
.formula  U|xTdummy = H|tename
.formula  U|xTyaufbez = ""
..
..
!LOOP001: ==============================
.continue ELOP001 ? _(xtdummy > "")
.formula  U|xTyaufbez = U|xTyaufbez + xtdummy<< ";"
.formula  xtdummy = xtdummy >> ";"
..
.continue LOOP001
!ELOP001: ==============================
..
.. Auftragsbezeichnung
.formula    U|xtpo10 = U|xtblank + U|xTyaufbez
.formula    U|xtpo10 = U|xtpo10 >> 30
..
.. Positionsbezeichnung / Arbeitsgangname
.add H|lres
..
..
.continue EL002 ? _(G|mehr)
.. IF002
.formula  xtdummy = D|elname
.formula  U|xTyaufbez = ""
..
..
!LOOP002: ==============================
.continue ELOP002 ? _(xtdummy > "")
.formula  U|xTyaufbez = U|xTyaufbez + xtdummy<< ";"
.formula  xtdummy = xtdummy >> ";"
..
.continue LOOP002
!ELOP002: ==============================
..
.formula    U|xtpo12 = U|xtblank + 'D|id'
..
.continue FI002
!EL002
.formula  U|xTyaufbez = ""
.formula  U|xtpo12    = U|xtblank
..
!FI002
..
.formula    U|xtpo11 = U|xtblank + U|xTyaufbez
.formula    U|xtpo11 = U|xtpo11 >> 30
..
.. Positions- ID von ABAS (ggf. fÅr ETAGIS notwendig)
.. .formula    U|xtpo12 = U|xtblank + 'D|id'
.formula    U|xtpo12 = U|xtpo12 >> 20
..
.. Arbeitsgang Nummer
.formula    U|xtpo13 = U|xTnull + 'H|ag^nummer'
.formula    U|xtpo13 = xtpo13 >> 9
..
'U|xtpo1'#'U|xtpo2'#'U|xtpo3'#'U|xtpo4'#'U|xtpo6'#'U|xtpo7'#'U|xtpo8'#'U|xtpo9'#'U|xtpo10'#'U|xtpo11'#'U|xtpo12'#'U|xtpo13'#
..
.continue 'xprocst.xprocsp'
..
!EPROCDEF: ----- end procedure definitions -----
.. ----------------------------------------
..
.input "INI.BDE"
..
..
.continue EL003 ? _(G|evtkommd <> G|kaktname.U|koaktZEIGEN)
.. IF003
.select screen Header
..
..
.continue EL004 ? _(-M|status = "S")
.. IF004
.formula U|xTtempfile = "tmp/XBDESTORNO" + 'G|versionneu' + ".TMP"
..
.output New 'U|xTtempFile'
.input DATEI.F
..
.formula xtblank = "                                        "
.formula xtnull  = "00000000000000000000"
..
.. --------------------   BLOCK  --------------------
.. Arbeitsscheine dazu durchgehen
.select add M|pba
..
..
!LOOP003: ==============================
.continue ELOP003 ? _(T|mehr)
.formula xprocsp = xprocsp + 1
.type text xprocst.xprocsp ? _defined(xprocst.xprocsp)
.formula xprocst.xprocsp = "RET001" 
.continue PROC001
!RET001
.formula xprocsp = xprocsp - 1
..
.select add H|pba
..
.continue LOOP003
!ELOP003: ==============================
..
.. -------------------- ENDBLOCK --------------------
..
.output
..
..
.continue EL005 ? _(U|xyTmandant = G|mandant)
.. IF005
.FORMEL xTsys = "s3_conv 3 " + U|xTtempfile
.system 'U|xTsys' Background
.FORMEL xTsys = "cat " + U|xTtempfile + " >> " + U|xyTexportfile
.system 'U|xTsys' Background
.FORMEL xTsys = "crlf+ " + U|xyTexportfile
.system 'U|xTsys' Background
..
.continue FI005
!EL005
..
.continue EL006 ? _(_(G|batchmode))
.. IF006
.text U|xT0 'G|bspri' ACHTUNG
.text U|xT2 'G|bspri' Dieser Mandant ist nicht fÅr einen Export freigegeben!
.text U|xT3 'G|bspri' Es werden nur temporÑre Dateien erzeugt!
.text U|xT4 'G|bspri' Eine öbergabe der Daten erfolgt nicht!
..
.box 'U|xT0'
'U|xT2'
'U|xT3'
'U|xT4'
..
..
!EL006
.. FI006
..
!FI005
..
!EL004
.. FI004
..
!EL003
.. FI003
..
.continue
..
